

<form name="editForm" role="form" novalidate (ngSubmit)="save()" #editForm="ngForm">

    <div class="modal-header">
        <h4 class="modal-title" id="myEventEntryLabel" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.createOrEditLabel">Create or edit a Event Entry</h4>
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                (click)="clear()">&times;</button>
    </div>
    <div class="modal-body">
        <jhi-alert-error></jhi-alert-error>
        <div class="row">
			<div class="col-lg-3 col-md-3">
		        <div class="form-group">
		            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.raceNumber" for="field_raceNumber">Race Number</label>
		            <input type="text" class="form-control" name="raceNumber" id="field_raceNumber"
		                [(ngModel)]="eventEntry.raceNumber"
		            required />
		            <div [hidden]="!(editForm.controls.raceNumber?.dirty && editForm.controls.raceNumber?.invalid)">
		                <small class="form-text text-danger"
		                   [hidden]="!editForm.controls.raceNumber?.errors?.required" jhiTranslate="entity.validation.required">
		                   This field is required.
		                </small>
		            </div>
		        </div>
	        </div>
	        <div *ngIf="!eventEntry.eventEdition.multidriver" class="col-lg-9 col-md-9">
		        <div class="form-group">
		        	<div class="row">
						<div class="col-lg-8 col-md-8">
				            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.driver" for="field_driver">Driver</label>
				            <ng2-completer id="field_driver" name="driver" [(ngModel)]="driverSearch" [datasource]="dataServiceDriver" [minSearchLength]="2" 
		            			(selected)="onDriverSelected($event)" [inputClass]="form-control" [pause]="300" required></ng2-completer>
				            <div [hidden]="!(editForm.controls.driver?.dirty && editForm.controls.driver?.invalid)">
				                <small class="form-text text-danger"
				                   [hidden]="!editForm.controls.driver?.errors?.required" jhiTranslate="entity.validation.required">
				                   This field is required.
				                </small>
				            </div>
				        </div>
				        <div class="col-lg-4 col-md-4">
				        	<label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.rookie" for="field_rookie">Rookie</label>
				        	<i [ngClass]="eventEntry.rookie ? 'fa fa-fw fa-check-square-o' : 'fa fa-fw fa-square-o'" (click)="eventEntry.rookie = !eventEntry.rookie"></i>
				        </div>
				    </div>
		        </div>
	        </div>
	        <div *ngIf="eventEntry.eventEdition.multidriver" class="col-lg-9 col-md-9">
		        <div class="form-group">
		            <div class="row">
						<div class="col-lg-6 col-md-6">
							<label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.drivers" for="field_driver">Drivers</label>
							<ng2-completer id="field_driver" name="driver" [(ngModel)]="driverSearch" [datasource]="dataServiceDriver" [minSearchLength]="2" 
            					(selected)="onDriverSelected($event)" [inputClass]="form-control" [pause]="300"></ng2-completer>
						</div>
						<div class="col-lg-6 col-md-6">
							<select class="form-control" multiple name="drivers" [value]="eventEntry.drivers" (dblclick)="removeDriver($event)" required>
				                <option *ngFor="let driver of eventEntry.drivers" [value]="driver.id">{{driver.fullName}}</option>
				            </select>
						    <button type="button" class="btn" (click)="removeDriver($event)">
						        <span class="fa fa-minus"></span>&nbsp;<span jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.removeSelected">Cancel</span>
						    </button>
						</div>
					</div>
		        </div>
	        </div>
        </div>
        <div class="form-group">
	        <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.teamName" for="field_entryName">Entry Name</label>
	        <input type="text" class="form-control" name="entryName" id="field_entryName" [(ngModel)]="eventEntry.entryName" required maxlength="100" />
	        <div [hidden]="!(editForm.controls.entryName?.dirty && editForm.controls.entryName?.invalid)">
	            <small class="form-text text-danger"
	               [hidden]="!editForm.controls.entryName?.errors?.required" jhiTranslate="entity.validation.required">
	               This field is required.
	            </small>
	            <small class="form-text text-danger"
	               [hidden]="!editForm.controls.entryName?.errors?.maxlength" jhiTranslate="entity.validation.maxlength" translateValues="{ max: 100 }">
	               This field cannot be longer than 100 characters.
	            </small>
	        </div>
	    </div>
	    <div class="row">
			<div class="col-lg-6 col-md-6">
		        <div class="form-group">
		            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.team" for="field_team">Team</label>
		            <ng2-completer id="field_team" name="team" [(ngModel)]="teamSearch" [datasource]="dataServiceTeam" [minSearchLength]="2" 
            			(selected)="onTeamSelected($event)" [inputClass]="form-control" [pause]="300" required></ng2-completer>
		            <div [hidden]="!(editForm.controls.team?.dirty && editForm.controls.team?.invalid)">
		                <small class="form-text text-danger"
		                   [hidden]="!editForm.controls.team?.errors?.required" jhiTranslate="entity.validation.required">
		                   This field is required.
		                </small>
		            </div>
		        </div>
	        </div>
	        <div class="col-lg-6 col-md-6">
		        <div class="form-group">
		            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.operatedBy" for="field_operatedBy">Operated By</label>
		            <ng2-completer id="field_operatedBy" name="operatedBy" [(ngModel)]="operatedBySearch" [datasource]="dataServiceTeamOperatedBy" [minSearchLength]="2" 
            			(selected)="onOperatedBySelected($event)" [inputClass]="form-control" [pause]="300"></ng2-completer>
		        </div>
	        </div>
        </div>
        <div class="form-group">
	        <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.category" for="field_category">Category</label>
	        <select class="form-control" id="field_category" name="category" [(ngModel)]="eventEntry.category" required>
                <option *ngFor="let category of allowedCategories; trackBy: trackCategoryById" 
                		[ngValue]="category.id === eventEntry.category?.id ? eventEntry.category : category">{{category.name}}</option>
            </select>
	        <div [hidden]="!(editForm.controls.entryName?.dirty && editForm.controls.entryName?.invalid)">
	            <small class="form-text text-danger"
	               [hidden]="!editForm.controls.entryName?.errors?.required" jhiTranslate="entity.validation.required">
	               This field is required.
	            </small>
	        </div>
	    </div>
	    <div class="row">
			<div class="col-lg-6 col-md-6">
		        <div class="form-group">
		            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.chassis" for="field_chassis">Chassis</label>
		            <ng2-completer id="field_chassis" name="chassis" [(ngModel)]="chassisSearch" [datasource]="dataServiceChassis" [minSearchLength]="2" 
            			(selected)="onChassisSelected($event)" [inputClass]="form-control" [pause]="300" required></ng2-completer>
		            <div [hidden]="!(editForm.controls.chassis?.dirty && editForm.controls.chassis?.invalid)">
		                <small class="form-text text-danger"
		                   [hidden]="!editForm.controls.chassis?.errors?.required" jhiTranslate="entity.validation.required">
		                   This field is required.
		                </small>
		            </div>
		        </div>
	        </div>
	        <div class="col-lg-6 col-md-6">
		        <div class="form-group">
		            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.engine" for="field_engine">Engine</label>
		            <ng2-completer id="field_engine" name="engine" [(ngModel)]="engineSearch" [datasource]="dataServiceEngine" [minSearchLength]="2" 
            			(selected)="onEngineSelected($event)" [inputClass]="form-control" [pause]="300" required></ng2-completer>
		            <div [hidden]="!(editForm.controls.engine?.dirty && editForm.controls.engine?.invalid)">
		                <small class="form-text text-danger"
		                   [hidden]="!editForm.controls.engine?.errors?.required" jhiTranslate="entity.validation.required">
		                   This field is required.
		                </small>
		            </div>
		        </div>
	        </div>
        </div>
        <div class="row">
			<div class="col-lg-6 col-md-6">
		        <div class="form-group">
		            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.tyres" for="field_tyres">Tyres</label>
		            <ng2-completer id="field_tyres" name="tyres" [(ngModel)]="tyresSearch" [datasource]="dataServiceTyres" [minSearchLength]="2" 
            			(selected)="onTyresSelected($event)" [inputClass]="form-control" [pause]="300" required></ng2-completer>
		        </div>
	        </div>
	        <div class="col-lg-6 col-md-6">
		        <div class="form-group">
		            <label class="form-control-label" jhiTranslate="motorsportsDatabaseApp.eventEdition.entry.fuel" for="field_fuel">Fuel</label>
		            <ng2-completer id="field_fuel" name="fuel" [(ngModel)]="fuelSearch" [datasource]="dataServiceFuel" [minSearchLength]="2" 
            			(selected)="onFuelSelected($event)" [inputClass]="form-control" [pause]="300"></ng2-completer>
		        </div>
	        </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" (click)="clear()">
            <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
        </button>
        <button type="submit" [disabled]="editForm.form.invalid || isSaving" class="btn btn-primary">
            <span class="fa fa-save"></span>&nbsp;<span jhiTranslate="entity.action.save">Save</span>
        </button>
    </div>
</form>
