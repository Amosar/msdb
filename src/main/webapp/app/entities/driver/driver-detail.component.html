
<div *ngIf="driver">
    <h2>{{compositeName}}</h2>
    <hr>
    <jhi-alert-error></jhi-alert-error>
    <ngb-tabset>
	  <ngb-tab title="{{'motorsportsDatabaseApp.driver.bio' | translate}}">
	    <ng-template ngbTabContent>
		    <div class="row">
		    	<div class="col-sm-6">
				    <dl class="row-md jh-entity-details">
				        <dt><span jhiTranslate="motorsportsDatabaseApp.driver.birthDate">Birth Date</span></dt>
				        <dd>
				            <span>{{driver.birthDate | date:'mediumDate'}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.driver.birthPlace">Birth Place</span></dt>
				        <dd>
				            <span>{{driver.birthPlace}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.driver.nationality">Nationality</span></dt>
				        <dd>
				        	<span *ngIf="driver.nationality"><img src="/images/flags64/{{driver.nationality}}.png"/></span>
				        </dd>
				        <dt *ngIf="driver.deathDate"><span jhiTranslate="motorsportsDatabaseApp.driver.deathDate">Death Date</span></dt>
				        <dd *ngIf="driver.deathDate">
				            <span>{{driver.deathDate | date:'mediumDate'}}</span>
				        </dd>
				        <dt *ngIf="driver.deathDate"><span jhiTranslate="motorsportsDatabaseApp.driver.deathPlace">Death Place</span></dt>
				        <dd *ngIf="driver.deathDate">
				            <span>{{driver.deathPlace}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.driver.age">Age</span></dt>
				        <dd>
				            <span *ngIf="driver.age != 0">{{driver.age}}</span>
				        </dd>
				    </dl>
			    </div>
			    <div class="col-sm-6">
			    	<dl class="row-md jh-entity-details">
				        <dd>
				            <div *ngIf="driver.portraitUrl">
				            	<img [src]="driver.portraitUrl" style="max-width: 100%;" alt="driver image"/>
				            </div>
				        </dd>
				    </dl>
			    </div>
		    </div>
		</ng-template>
	</ngb-tab>
	<ngb-tab title="{{'motorsportsDatabaseApp.driver.statistics' | translate}}">
	    <ng-template ngbTabContent>
	    	<div class="row" *ngIf="yearsStats?.length > 1">
	    		<div class="col-sm-10"></div>
	    		<div class="col-sm-2">
		    		<select class="form-control" id="field_jumpToEdition" name="jumpToYear" (change)="jumpToYear($event.target.value)">
	   					<option></option>
		            	<option *ngFor="let year of yearsStats" [value]="year">{{year}}</option>
		            </select>
	    		</div>
	    	</div>
	    	<div class="card" *ngFor="let categoryStats of stats">
			  <div class="card-header">
			    <h3>{{categoryStats.category}}</h3>
			  </div>
			  <div class="card-block">
			    <div class="row">
		    	<div class="col-sm-3">
				    <dl class="row-md jh-entity-details">
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.participations">Participations</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.participations}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.starts">Starts</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.starts}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.finished">Finished</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.finished}} ({{((categoryStats.stats.finished / categoryStats.stats.starts) * 100).toFixed(2)}}%)</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.bestFinalPosition">Best final position</span></dt>
				        <dd>
				            <span>{{finishingPosition(categoryStats.stats.bestFinishingPosR)}}  ({{categoryStats.stats.bestFinishingPosTimesR}} </span>
				            	<span *ngIf="categoryStats.stats.bestFinishingPosTimesR == 1" jhiTranslate="motorsportsDatabaseApp.stats.time">time</span>
				            	<span *ngIf="categoryStats.stats.bestFinishingPosTimesR > 1" jhiTranslate="motorsportsDatabaseApp.stats.times">times</span>)
				        </dd>
				    </dl>
			    </div>
			    <div class="col-sm-3">
			    	<dl class="row-md jh-entity-details">
			    		<dt><span jhiTranslate="motorsportsDatabaseApp.stats.championships">Championships</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.championships}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.wins">Wins</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.wins}} ({{((categoryStats.stats.wins / categoryStats.stats.starts) * 100).toFixed(2)}}%)</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.poles">Poles</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.poles}} ({{((categoryStats.stats.poles / categoryStats.stats.participations) * 100).toFixed(2)}}%)</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.bestStartingPosition">Best starting position</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.bestFinishingPosQ}}  ({{categoryStats.stats.bestFinishingPosTimesQ}} </span>
				            	<span *ngIf="categoryStats.stats.bestFinishingPosTimesQ == 1" jhiTranslate="motorsportsDatabaseApp.stats.time">time</span>
				            	<span *ngIf="categoryStats.stats.bestFinishingPosTimesQ > 1" jhiTranslate="motorsportsDatabaseApp.stats.times">times</span>)
				        </dd>
				    </dl>
			    </div>
			    <div class="col-sm-3">
			    	<dl class="row-md jh-entity-details">
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.podiums">Podiums</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.top3}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.top5">Top 5</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.top5}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.top10">Top 10</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.top10}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.fastLaps">Fast laps</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.fastLaps}}</span>
				        </dd>
				    </dl>
			    </div>
			    <div class="col-sm-3">
			    	<dl class="row-md jh-entity-details">
			    		<dt><span jhiTranslate="motorsportsDatabaseApp.stats.grandChelems">Grand Chelems</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.grandChelems}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.lapsCompleted">Laps Completed</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.lapsCompleted}}</span>
				        </dd>
				        <dt><span jhiTranslate="motorsportsDatabaseApp.stats.kmsCompleted">Kms. Completed</span></dt>
				        <dd>
				            <span>{{categoryStats.stats.kmsCompleted}}</span>
				        </dd>
				    </dl>
			    </div>
		    </div>
			  </div>
			</div>
	    </ng-template>
	</ngb-tab>
	</ngb-tabset>

    <button type="submit"
            (click)="previousState()"
            class="btn btn-info">
        <span class="fa fa-arrow-left"></span>&nbsp;<span jhiTranslate="entity.action.back"> Back</span>
    </button>

    <button type="button"
            [routerLink]="['/', { outlets: { popup: 'driver/'+ driver.id + '/edit'} }]"
            replaceUrl="true"
            class="btn btn-primary">
        <span class="fa fa-pencil"></span>&nbsp;<span jhiTranslate="entity.action.edit"> Edit</span>
    </button>
</div>
